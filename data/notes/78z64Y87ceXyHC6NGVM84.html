<h1 id="sqs-with-aws-lambda">SQS With Aws Lambda<a aria-hidden="true" class="anchor-heading icon-link" href="#sqs-with-aws-lambda"></a></h1>
<p>Aws Lambda can be configured to process messages from SQS.</p>
<h2 id="troubleshooting-sqs-invocations">Troubleshooting SQS Invocations<a aria-hidden="true" class="anchor-heading icon-link" href="#troubleshooting-sqs-invocations"></a></h2>
<p>When configuring a lambda function to run on receipt of an SQS message, I ran into the following problems, these are useful things to check to troubleshoot the problem.</p>
<ul>
<li>Check if the event source mapping got disabled. I had this happen to me even though at the code level it was enabled, so I am not sure why.
<pre class="language-sh"><code class="language-sh">aws lambda list-event-source-mappings --function-name &#x3C;function-name>
# if the state shows as being disabled, re-enable it:
aws lambda   update-event-source-mapping --uuid &#x3C;uuid from previous command> --enabled
</code></pre>
</li>
<li>Check if the queue has the expected attributes set, especially if using encryption: <code>aws sqs get-queue-attributes --queue-url &#x3C;url> --attribute-names All</code></li>
<li>If the queue uses encryption, ensure that the lambda has the <a title="Private" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank" class="private">necessary permissions to encrypt / decrypt the messages (Private)</a>. Otherwise, messages get dropped silently.</li>
</ul>